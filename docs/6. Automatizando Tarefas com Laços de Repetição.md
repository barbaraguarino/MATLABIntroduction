# **Introdução: O Poder da Repetição**

Em muitos problemas computacionais, nos deparamos com a necessidade de realizar a mesma operação ou um conjunto similar de operações múltiplas vezes. Por exemplo, processar cada um dos mil elementos de um vetor, calcular os termos de uma série numérica até que uma condição seja atingida, ou ler cada linha de um arquivo de dados. Escrever o código para cada repetição manualmente é inviável e ineficiente.

É aqui que entram os **laços de repetição** (ou *loops*). Eles são estruturas de controle de fluxo que permitem que um bloco de código seja executado repetidamente. O MATLAB, como a maioria das linguagens de programação, oferece duas estruturas principais para isso: o laço `while` e o laço `for`.

# **O Laço `while`: Repetição Baseada em Condição**

O laço `while` é ideal para situações em que você não sabe de antemão quantas vezes o bloco de código precisa ser executado. Ele continuará repetindo **enquanto** (*while*) uma determinada condição lógica for verdadeira.

A sintaxe é a seguinte:

```matlab
while condicao
    % Bloco de código a ser executado repetidamente
    % ...
    % É crucial que algo dentro do laço possa, eventualmente,
    % tornar a 'condicao' falsa.
end
```

**Fluxo de Execução:**

1. O MATLAB avalia a `condicao`.
2. Se a `condicao` for `true`, o bloco de código dentro do laço é executado.
3. Ao final do bloco, a execução retorna ao passo 1 para reavaliar a `condicao`.
4. Se a `condicao` for `false`, o laço termina e a execução do programa continua na primeira linha após o `end`.

**Exemplo Prático: Encontrando a Potência de 2 que Supera 1000**

Vamos usar um laço `while` para descobrir qual é a primeira potência de 2 que excede o valor 1000.

```matlab
% Inicialização das variáveis
valor = 1;
expoente = 0;

% O laço continuará enquanto o 'valor' for menor ou igual a 1000
while valor <= 1000
    % Multiplica o valor por 2
    valor = valor * 2;
    
    % Incrementa o expoente
    expoente = expoente + 1;
    
    % Opcional: exibir o progresso
    fprintf('2^%d = %d\n', expoente, valor);
end

fprintf('\nLaço terminado.\n');
fprintf('A primeira potência de 2 maior que 1000 é 2^%d = %d.\n', expoente, valor);
```

**Cuidado com o Laço Infinito!**

Um erro comum com o laço `while` é criar uma condição que nunca se torna falsa. Isso resulta em um **laço infinito**, e o programa ficará "preso", executando o mesmo bloco de código para sempre. Se isso acontecer, você pode forçar a parada da execução no MATLAB pressionando `Ctrl + C` na *Command Window*. No exemplo acima, se esquecêssemos de atualizar as variáveis `valor` e `expoente` dentro do laço, a condição `valor <= 1000` seria sempre verdadeira.

# **O Laço `for`: Repetição Baseada em Sequência**

Diferente do `while`, o laço `for` é usado quando você **sabe exatamente quantas vezes** quer repetir um bloco de código. Ele itera sobre os elementos de um vetor ou matriz, executando o bloco de código uma vez para cada elemento da sequência.

A sintaxe é:

```matlab
for variavel_de_iteracao = vetor_de_valores
    % Bloco de código a ser executado
    % ...
    % A 'variavel_de_iteracao' assume o valor de cada
    % elemento do 'vetor_de_valores' a cada passagem.
end
```

**Exemplo Prático: Calculando o Quadrado dos Números de 1 a 5**

```matlab
% O vetor_de_valores é 1:5, que gera a sequência [1, 2, 3, 4, 5]
for i = 1:5
    % Na primeira passagem, i = 1. Na segunda, i = 2, e assim por diante.
    resultado = i^2;
    fprintf('O quadrado de %d é %d.\n', i, resultado);
end
```

O laço `for` é extremamente versátil. O `vetor_de_valores` pode ser qualquer vetor que você criar, não apenas uma sequência simples.

```matlab
notas = [8.5, 7.0, 9.2, 5.5, 10.0];
soma = 0;

for nota_atual = notas
    % A cada iteração, 'nota_atual' recebe um valor do vetor 'notas'
    soma = soma + nota_atual;
end

media = soma / length(notas);
fprintf('A média das notas é: %.2f\n', media);
```

# **O Caminho do MATLAB: Vetorização e Matrizes Lógicas**

Embora os laços `for` e `while` funcionem perfeitamente, eles muitas vezes não são a maneira mais eficiente de resolver problemas no MATLAB. Como vimos nos capítulos anteriores, o MATLAB é otimizado para operações em matrizes e vetores inteiros. A prática de reescrever um problema para que ele possa ser resolvido com operações de matriz em vez de laços explícitos é chamada de **vetorização**.

Código vetorizado é:

- **Mais Rápido:** As operações são executadas em código pré-compilado e altamente otimizado, em vez de serem interpretadas linha a linha pelo MATLAB.
- **Mais Conciso e Legível:** Frequentemente, uma operação que requer várias linhas em um laço pode ser expressa em uma única linha vetorizada.

**Exemplo Comparativo: Laço vs. Vetorização**

**Tarefa:** Dado um vetor `x`, criar um novo vetor `y` onde cada elemento é o seno do elemento correspondente em `x`, mas somente se o elemento em `x` for positivo. Caso contrário, o elemento em `y` deve ser 0.

**Solução com Laço `for` (Abordagem Tradicional):**

```matlab
x = linspace(-2*pi, 2*pi, 1000); % Cria 1000 pontos
y = zeros(size(x)); % Pré-aloca o vetor y com zeros (boa prática de performance)

tic; % Inicia um cronômetro
for i = 1:length(x)
    if x(i) > 0
        y(i) = sin(x(i));
    else
        y(i) = 0; % Esta parte é redundante devido à pré-alocação
    end
end
toc; % Para o cronômetro e exibe o tempo decorrido
```

**Solução com Vetorização (O "Jeito MATLAB"):**

```matlab
x = linspace(-2*pi, 2*pi, 1000);

tic; % Inicia o cronômetro

% 1. Criar uma matriz lógica (ou 'máscara')
indices_positivos = (x > 0); 
% 'indices_positivos' é um vetor de 'true' e 'false'. 
% Ex: [false, false, ..., true, true]

% 2. Inicializar y com zeros (pode ser feito em um passo só)
y = zeros(size(x));

% 3. Aplicar a operação APENAS nos elementos onde a máscara é 'true'
y(indices_positivos) = sin(x(indices_positivos));

toc; % Para o cronômetro
```

Ao executar os dois blocos de código, você notará que a versão vetorizada é significativamente mais rápida, especialmente para vetores grandes. Além disso, ela expressa a *intenção* do que está sendo feito ("aplique o seno nos valores positivos de x") de forma mais direta do que a mecânica do laço.

**Quando usar laços?**

A vetorização é poderosa, mas não resolve todos os problemas. Você ainda precisará de laços em situações onde:

- A computação da iteração atual depende do resultado da iteração anterior (processos iterativos, como em algumas simulações).
- Não há uma maneira matemática direta de expressar a operação em termos de matrizes.
- O fluxo de controle é genuinamente complexo e não se resume a uma seleção condicional de elementos.