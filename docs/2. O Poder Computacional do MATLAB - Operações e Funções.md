# Introdução: Da Estrutura à Ação

Nos capítulos anteriores, focamos em como criar e organizar dados no MATLAB, aprendendo a construir as estruturas fundamentais: variáveis e matrizes. Agora, faremos a transição da estrutura para a ação. Este capítulo é dedicado à manipulação desses dados através de operações aritméticas e ao uso do vasto arsenal de funções pré-definidas do MATLAB. É aqui que a verdadeira capacidade de “laboratório” da ferramenta se revela, permitindo-nos realizar desde cálculos simples até complexas transformações de dados com uma sintaxe elegante e poderosa.

# Operações com Escalares e Matrizes: O Coração da Linguagem

A forma como o MATLAB lida com operações aritméticas é, possivelmente, sua característica mais distintiva e poderosa. A chave é compreender a diferença fundamental entre operações de álgebra linear tradicionais e operações aplicadas elementos a elementos.

## Operações com Escalares

Esta é a forma mais simples de operação. Quando você realiza uma operação aritmética entre uma matriz e um escalar (um único número), o MATLAB aplica essa operação a **cada elemento** da matriz, individualmente. O resultado é uma nova matriz com as mesmas dimensões da original.

```matlab
% Vamos criar uma matriz para nossos exemplos
A = [1 2 3; 4 5 6];

% Adicionar um escalar a cada elemento
soma = A + 10;
% Resultado: [11 12 13; 14 15 16]

% Multiplicar cada elemento por um escalar
produto = A * 2;
% Resultado: [2 4 6; 8 10 12]

% Elevar cada elemento a uma potência escalar
potencia = A .^ 2; % Note o ponto aqui, vamos explicar em seguida
% Resultado: [1 4 9; 16 25 36]
```

## A Distinção Crucial: Operações Matriciais vs. *Element-wise*

Este é o conceito mais importante deste capítulo. Ao operar duas matrizes entre si, o MATLAB oferece dois modos distintos:

1. **Operações Matriciais (Álgebra Linear)**: Utilizam os operadores aritméticos padrão (`*`, `/`, `^`). Elas seguem as regras rigorosas da álgebra linear.
2. **Operações Element-wise (Elemento a Elemento)**: Utilizam um ponto (`.`) antes do operador (`.*`, `./`, `.^`). Elas realizam a operação entre os elementos que ocupam a mesma posição nas duas matrizes.

Vejamos a diferença com multiplicação, onde ela é mais evidente.

- **Multiplicação Matricial (*):** Para que* `C = A * B` seja possível, o número de colunas da matriz `A` deve ser igual ao número de linhas da matriz `B`. Se `A` é uma matriz de dimensão $m \times n$ e `B` é $n \times p$, o resultado `C` será uma matriz $m \times p$, onde cada elemento $C_{ij}$ é o produto escalar da linha $i$ de `A` com a coluna $j$ de `B`. A fórmula matemática é $C_{ij}=\sum_k=1^nA_{ik}B_{kj}$.
- **Multiplicação Element-wise (.*):** Para que `C = A .* B` seja possível, as matrizes `A` e `B` devem ter **exatamente as mesmas dimensões**. O resultado `C` também terá a mesma dimensão, e cada elemento $C_{ij}$ será simplesmente o produto dos elementos correspondentes: $C_{ij}=A_{ij}\times B_{ij}$.

Vamos a um exemplo prático para solidificar essa ideia.

```matlab
A = [1 2; 3 4];
B = [5 6; 7 8];

% Multiplicação ELEMENT-WISE (Elemento a Elemento)
C_element_wise = A .* B;
% Como é calculado:
% C_ew(1,1) = A(1,1) * B(1,1) = 1 * 5 = 5
% C_ew(1,2) = A(1,2) * B(1,2) = 2 * 6 = 12
% C_ew(2,1) = A(2,1) * B(2,1) = 3 * 7 = 21
% C_ew(2,2) = A(2,2) * B(2,2) = 4 * 8 = 32
% Resultado: C_element_wise = [5 12; 21 32]
disp('Resultado da Multiplicação Element-wise:');
disp(C_element_wise);

% Multiplicação MATRICIAL (Álgebra Linear)
C_matricial = A * B;
% Como é calculado:
% C_mat(1,1) = (A(1,1)*B(1,1)) + (A(1,2)*B(2,1)) = (1*5) + (2*7) = 19
% C_mat(1,2) = (A(1,1)*B(1,2)) + (A(1,2)*B(2,2)) = (1*6) + (2*8) = 22
% C_mat(2,1) = (A(2,1)*B(1,1)) + (A(2,2)*B(2,1)) = (3*5) + (4*7) = 43
% C_mat(2,2) = (A(2,1)*B(1,2)) + (A(2,2)*B(2,2)) = (3*6) + (4*8) = 50
% Resultado: C_matricial = [19 22; 43 50]
disp('Resultado da Multiplicação Matricial:');
disp(C_matricial);
```

Essa mesma lógica se aplica à divisão (`/` vc `./`) e à potenciação (`^` vs `.^`). A adição (`+`) e a subtração (`-`) são naturalmente *element-wise*, então não precisam do produto.

### A Operação de Transposição

Uma operação matricial fundamental é a **transposição**, que inverse as linhas e colunas de uma matriz. No MATLAB, isso é feito com o operador apóstrofo (`’`).

```matlab
A = [1 2 3; 4 5 6]; % Matriz 2x3
B = A';                % B se torna a transposta de A

% Resultado: B será uma matriz 3x2
% B = [1 4; 
%      2 5; 
%      3 6]
```

# A Hierarquia de Operações

Quando uma expressão complexa contém múltiplos operadores, o MATLAB a avalia seguindo uma ordem de precedência bem definida, similar à que aprendemos na matemática (conhecida como PEMDAS/BODMAS). Conhecer essa ordem é vital para garantir que seus cálculos produzam o resultado esperado.

A ordem, da maior para a menor prioridade, é:

1. **Parênteses** `( )`: Expressões dentro de parênteses são sempre avaliadas primeiro, de dentro para fora. São usados para forçar uma ordem de execução.
2. **Transposição** **(**`’`**),** **Potenciação (`^` matricial, `.^` element-wise)**: Avaliados da esquerda para a direita.
3. **Negação Unária (**`-A`**)**: A inversão de sinal de um número ou matriz.
4. **Multiplicação e Divisão (**`*`***,** `/`**,** `\`**,** `.**`**,** `./`**,** `.\`**)**: Todas têm a mesma prioridade e são avaliadas da esquerda para a direita.
    - **Nota sobre a Divisão**: O MATLAB tem duas barras de divisão. `A / B` é a divisão à direita (equivalente a $A \cdot B^{-1}$), enquanto A \ B é a divisão à esquerda (equivalente a $A^{-1} \cdot B$), muito útil para resolver sistemas de equações lineares.
5. **Adição e Subtração (**`+`**,**`-`**)**: Têm a mesma prioridade e são avaliadas da esquerda para a direita.

**Exemplo Prático Detalhado:**

Vamos analisar como o MATLAB resolveria a seguinte expressão: `R = (A + 5) .* B' - C;`

1. **Parênteses**: Primeiro, `(A + 5)` seria calculado. Cada elemento de `A` seria somado a 5. Vamos chamar este resultado de `Temp1`.
2. **Transposição**: Em seguida, `B'` seria calculado, transpondo a matriz `B`. Vamos chamar este resultado de `Temp2`.
3. **Multiplicação**: Agora, a expressão é `R = Temp1 .* Temp2 - C`. A multiplicação *element-wise* `Temp1 .* Temp2` seria executada. Para isso, `Temp1` e `Temp2` precisariam ter as mesmas dimensões. O resultado seria `Temp3`.
4. **Subtração**: Finalmente, `R = Temp3 - C` seria calculado, resultando no valor final de `R`.

# Funções Pré-definidas: O Arsenal do MATLAB

Além dos operadores, o MATLAB oferece uma biblioteca gigantesca de funções prontas para uso. A grande maioria dessas funções é **vetorizada**, ou seja, elas são otimizadas para operar sobre matrizes e vetores inteiros de uma só vez, o que é mais eficiente do que processar os dados em uma laço `for`.

Vamos categorizar algumas das mais essenciais:

**Funções Matemáticas Comuns (operam *element-wise*)**
Estas funções são aplicadas a cada elemento da matriz de entrada.

- `sqrt(A)`: Calcula a raiz quadrada de cada elemento.
- `abs(A)`: Calcula o valor absoluto (módulo) de cada elemento.
- `log(A)`, `log10(A)`: Logaritmo natural e na base 10.
- `exp(A)`: Exponencial de cada elemento (ex).
- `sin(A)`, `cos(A)`, `tan(A)`: Funções trigonométricas (argumento em radianos).
- `round(A)`, `floor(A)`, `ceil(A)`: Funções de arredondamento.

**Funções de Análise e Estatística**
Estas funções geralmente agregam os dados da matriz. Por padrão, elas operam **ao longo das colunas**.

- `sum(A)`: Retorna um vetor linha contendo a soma de cada coluna.
- `mean(A)`: Retorna um vetor linha contendo a média de cada coluna.
- `max(A)`: Retorna um vetor linha contendo o valor máximo de cada coluna.
- `min(A)`: Retorna um vetor linha contendo o valor mínimo de cada coluna.
- `std(A)`: Retorna um vetor linha contendo o desvio padrão de cada coluna.

Para operar ao longo das linhas, você pode passar um segundo argumento indicando a dimensão: `sum(A, 2)` soma os elementos de cada linha.

**Exemplo de uso:**

```matlab
M = [1 8 6; 7 2 9; 4 3 5];

soma_colunas = sum(M);     % Resultado: [12 13 20]
soma_linhas = sum(M, 2);     % Resultado: [15; 18; 12] (vetor coluna)
maximo_geral = max(M(:)); % O M(:) transforma a matriz num único vetor coluna
                         % para achar o máximo global. Resultado: 9
```

**Funções para Obter Informações sobre Matrizes**

- `size(A)`: Retorna um vetor com as dimensões da matriz. Ex: `[2 3]` para uma matriz 2x3.
- `length(A)`: Retorna o tamanho da maior dimensão.
- `numel(A)`: Retorna o número total de elementos na matriz.